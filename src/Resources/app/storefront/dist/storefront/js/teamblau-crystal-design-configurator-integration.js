"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["teamblau-crystal-design-configurator-integration"],{8033:(e,t,n)=>{var i=n(6285);class a extends i.Z{init(){this._newElements()}_newElements(){if(this._buttons=document.getElementsByClassName("openConfiguratorBtn"),!(this._buttons.length>0))throw new Error(`No button found for the plugin: ${this.constructor.name}`);this._divaScript()}_divaScript(){document.querySelectorAll(".openConfiguratorBtn").forEach((e=>e.addEventListener("click",(e=>{if("BUTTON"==e.target.nodeName)var t=e.target;else if("BUTTON"==e.target.parentNode.nodeName)t=e.target.parentNode;else if("BUTTON"==e.target.parentNode.parentNode.nodeName)t=e.target.parentNode.parentNode;else console.log("Error finding button."),console.log(e.target);DIVA_LOGGER=3;let n=t.getAttribute("data-organization-id"),i=t.getAttribute("data-identifier"),a=t.getAttribute("data-shop-language"),d=t.getAttribute("data-diva-nr"),r=t.getAttribute("data-update-line-item"),o=t.getAttribute("data-quantity");d||(d=t.getAttribute("data-product-number")),"de"===a||"it"===a||"en"===a||"fr"===a||(a="de");const l=document.createElement("diva-framework");l.organizationId=n,l.identifier=i,l.language=a,l.currentComponent={type:"DIVA_WEBPLANNER",parameters:{divaNr:d},openInFullscreen:!0,absoluteFullscreen:!0};const u=document.getElementById("framework");u.appendChild(l),l.addEventListener("onAddToBasket",(e=>{console.log("Added with Diva Nr "+e.detail.DivaNr),console.log(e.detail);let t="",n=0,i="";null!=r?(t="/diva/line-item/update",n=o,i="frontend.checkout.cart.page"):(t="/diva/line-item/add",n=1,i="frontend.cart.offcanvas");let a=document.createElement("form");a.setAttribute("method","post"),a.setAttribute("action",t),a.setAttribute("id","divaForm"),a.setAttribute("data-add-to-cart","true");let d=document.createElement("input");d.setAttribute("type","hidden"),d.setAttribute("name","divaNr"),d.setAttribute("value",e.detail.DivaNr),a.appendChild(d);let s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name","documentVersion"),s.setAttribute("value",e.detail.DocumentVersion),a.appendChild(s);let c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name","redirectTo"),c.setAttribute("value",i),a.appendChild(c);let m=document.createElement("input");m.setAttribute("type","hidden"),m.setAttribute("name","quantity"),m.setAttribute("value",n),a.appendChild(m);let p=document.createElement("button");p.setAttribute("id","divaBuyBtn"),p.setAttribute("type","submit"),p.setAttribute("class","d-none"),a.appendChild(p),l.appendChild(a),null!=r?document.getElementById("divaForm").submit():(window.PluginManager.initializePlugins(),document.getElementById("divaBuyBtn").click()),u.removeChild(l);const g=document.getElementsByClassName("diva-pseudo-fullscreen");Array.from(g).forEach((e=>e.classList.remove("diva-pseudo-fullscreen")))})),l.addEventListener("onWebPlanerSave",(e=>{console.log("Added with Diva Nr to Wishlist "+e.detail.DivaNr),console.log(e.detail)})),l.addEventListener("closeComponentInFullscreen",(e=>{u.removeChild(l)})),l.addEventListener("onError",(e=>{console.log("An error occurred"),console.log(e.detail)}))}))))}}class d extends i.Z{init(){this._divaScript()}_divaScript(){const e=document.createElement("diva-framework"),t=document.getElementById("framework"),n=t.getAttribute("data-organization-id"),i=t.getAttribute("data-language"),a=t.getAttribute("data-identifier"),d=t.getAttribute("data-diva-product-id");"de"===i||"it"===i||"en"===i||"fr"===i||(i="de"),e.organizationId=n,e.identifier=a,e.language=i,e.currentComponent={type:"CONTENTBOX",parameters:{productId:d}},t.appendChild(e),e.addEventListener("onAddToBasket",(e=>{console.log("Added with Diva Nr "+e.detail.DivaNr),console.log(e.detail)})),e.addEventListener("onWebPlanerSave",(e=>{console.log("Added with Diva Nr to Wishlist "+e.detail.DivaNr),console.log(e.detail)})),e.addEventListener("onVariantSelected",(e=>{window.location.href="/detail/"+e.detail.customData.shopwareId.value})),e.addEventListener("onError",(e=>{console.log("An error occurred"),console.log(e.detail)})),document.getElementById("openConfig").addEventListener("click",(t=>{e.invokeEvent("openConfiguratorOverlay")})),e.addEventListener("onAddToBasket",(t=>{console.log("Added with Diva Nr "+t.detail.DivaNr),console.log(t.detail);let n=document.createElement("form");n.setAttribute("method","post"),n.setAttribute("action","/diva/line-item/add"),n.setAttribute("id","divaForm"),n.setAttribute("data-add-to-cart","true");let i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name","divaNr"),i.setAttribute("value",t.detail.DivaNr),n.appendChild(i);let a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name","documentVersion"),a.setAttribute("value",t.detail.DocumentVersion),n.appendChild(a);let d=document.createElement("input");d.setAttribute("type","hidden"),d.setAttribute("name","redirectTo"),d.setAttribute("value","frontend.cart.offcanvas"),n.appendChild(d);let r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name","quantity"),r.setAttribute("value",1),n.appendChild(r);let o=document.createElement("button");o.setAttribute("id","divaBuyBtn"),o.setAttribute("type","submit"),o.setAttribute("class","d-none"),n.appendChild(o),e.appendChild(n),window.PluginManager.initializePlugins(),document.getElementById("divaBuyBtn").click(),e.invokeEvent("onFullscreenClose")}))}}const r=window.PluginManager;r.register("ConfiguratorIntegration",a,"[data-tb-configurator-integration]"),r.register("ProductDetailConfigurator",d,"[data-tb-product-detail-configurator]")}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=8033,e(e.s=t);var t}));e.O()}]);